# AS 관리

## 1. 화면 개요

### 1.1 기본 정보

- **화면명**: AS 관리
- **목적**: AS 접수 목록 조회/검색, AS 상세 확인, 신규 AS 접수 등록, 상태 변경

---

## 2. 초기 로드

### 2.1 초기 데이터 로드

- 전체 AS 목록 조회
- 최신순 정렬
- 페이징: 50건씩

### 2.2 초기 화면 상태

- 상태 필터: "상태 전체" 선택
- 현장 필터: "현장 전체" 선택
- 문제유형 필터: "문제유형 전체" 선택
- 검색어: 비어있음
- 요약 영역: 각 상태별 건수 표시
    - 접수 / 회수 / 수리중 / 완료 / 평균 처리일

---

## 3. 검색/필터 영역

### 3.1 상태 필터

**필터 옵션:**

- 상태 전체 (기본값) / 접수 / 회수 / 수리중 / 완료

### 3.2 현장 필터

**필터 옵션:**

- 현장 전체 (기본값) / 등록된 현장 목록

### 3.3 문제유형 필터

**필터 옵션:**

- 문제유형 전체 (기본값) / 초기 불량 / 고장 / 파손

### 3.4 검색 기능

**검색 대상:**

- AS번호 / 자재명
- 통합 검색 (OR 조건)

**검색 결과:**

- 매칭된 AS만 표시
- 결과 없으면: "검색 결과가 없습니다" 메시지 테이블에 표시

### 3.5 초기화 기능

**[초기화] 버튼 클릭 시:**

- 검색 입력 필드 초기화
- 모든 필터 기본값으로 리셋
- 전체 목록 재조회

---

## 4. 요약 영역

### 4.1 통계 표시

```
접수: 5건 | 회수: 3건 | 수리중: 2건 | 완료: 45건 | 평균 처리: 2.3일
```

**특징:**

- 실시간 업데이트 (등록/수정 시)

### 4.2 [+ 새 AS 접수] 버튼

**위치:** 요약 영역 우측

**클릭 시:**

- AS 접수 등록 모달 오픈
- 폼 필드 초기화

---

## 5. 목록 테이블

### 5.1 컬럼 구조

| 컬럼명 | 표시 내용 | 비고 |
| --- | --- | --- |
| AS 번호 | AS-2024-001 | 굵게 표시 |
| 현장 | 강남 오피스텔 |  |
| 자재 | IP카메라 2MP |  |
| 문제 유형 | 초기 불량 |  |
| 접수일 | 2024-01-20 |  |
| 경과 | 3일 | 접수일 기준 경과 시간 |
| 상태 | 뱃지 (수리중) | 색상 구분 |
| 작업 | (비어있음) | 향후 버튼 추가 예정 |

### 5.2 행 클릭

**트리거:** 테이블 행 클릭

**동작:**

- 해당 AS의 상세 모달 오픈
- AS 상세 정보 로드

### 5.3 상태 뱃지

| 상태 | 색상 |
| --- | --- |
| 접수 | 빨간색 |
| 회수 | 파란색 |
| 수리중 | 주황색 |
| 준비완료 | 초록색 |
| 완료 | 회색 |

---

## 6. AS 상세 모달

### 6.1 오픈 조건

- 테이블 행 클릭

### 6.2 표시 정보

**기본 정보:**

- AS 번호
- 상태 (뱃지)
- 현장 (현장명 + 현장코드)
- 자재 (자재명 + 자재코드)
- 시리얼 번호
- 문제 유형 (빨간색 강조)
- 접수일시
- 경과 시간 (주황색 강조)

**문제 설명:**

- 접수 시 입력한 문제 상황 텍스트

**처리 진행 상황 (타임라인):**

- 처리 단계별 일시, 담당자, 내용 표시
- 예정 항목은 회색 처리

### 6.3 버튼

- [상태 변경]: AS 상태 변경 처리
- [닫기]: 모달 닫기

---

## 7. AS 접수 등록 모달

### 7.1 모달 오픈

**트리거:**

- [+ 새 AS 접수] 버튼 클릭

**초기 상태:**

- 접수일: 현재 날짜/시간 기본값
- 접수자: 현재 로그인 사용자 기본값

### 7.2 입력 필드

**필수 입력 (*):**

- 현장*
- 자재* (텍스트 입력)
- 문제 유형* (초기 불량 / 고장 / 파손 / 오작동 / 기타)
- 접수일*
- 문제 설명*

**선택 입력:**

- 발주 (연관 발주 선택)
- 시리얼 번호
- 접수자 (기본값: 현재 사용자)

### 7.3 [접수 등록] 버튼

**유효성 검증:**

- 필수 필드 입력 확인
- 미입력 시: "필수 항목을 모두 입력해주세요" 알림

**동작 순서:**

1. 필수 필드 검증
2. AS 등록 처리
3. AS 번호 자동 생성 (예: AS-2024-005)
4. 초기 상태: "접수"로 설정
5. 성공 알림: "AS가 접수되었습니다! AS 번호: AS-2024-005"
6. 모달 닫기
7. 목록 갱신 (새 AS 최상단 추가)
8. 요약 건수 업데이트

### 7.4 [취소] 버튼

**동작:**

- 모달 닫기
- 변경사항 없음

---

## 8. 상태 정의 및 흐름

### 8.1 상태 종류

| 상태 | 설명 |
| --- | --- |
| 접수 | AS 접수 완료, 회수 대기 중 |
| 회수 | 자재 회수 완료, 수리/검수 대기 |
| 수리중 | 수리 진행 중 |
| 준비완료 | 수리 완료, 재출고 대기 |
| 완료 | 재출고 완료, AS 종결 |

### 8.2 상태 흐름

**기본 흐름:**

```
접수 → 회수 → 수리중 → 준비완료 → 완료
```

---

## 9. 비즈니스 규칙

### 9.1 AS 번호 생성

- 자동 생성
- 형식: AS-YYYY-NNN (예: AS-2024-001)

### 9.2 경과 시간

- 접수일 기준으로 현재까지 경과 시간 자동 계산
- 목록: "N일" 형식으로 표시
- 상세: "N일 N시간" 형식으로 표시

### 9.3 처리 이력 기록

- 상태 변경 시마다 타임라인에 기록
- 일시, 담당자, 내용 저장

---

## 10. 에러 처리

### 10.1 사용자 입력 오류

| 상황 | 메시지 |
| --- | --- |
| 필수 필드 누락 | "필수 항목을 모두 입력해주세요" |

---

## 11. 개발 체크리스트

### 11.1 필수 구현 사항

- [ ]  AS 목록 조회
- [ ]  검색 (AS번호/자재명 통합)
- [ ]  상태/현장/문제유형 필터
- [ ]  신규 AS 접수 등록
- [ ]  AS 상세 조회 (타임라인 포함)
- [ ]  상태 변경

### 11.2 유효성 검증

- [ ]  필수 필드 검증 (현장, 자재, 문제유형, 접수일, 문제설명)
- [ ]  AS 번호 중복 방지

### 11.3 비즈니스 로직

- [ ]  AS 번호 자동 생성
- [ ]  경과 시간 자동 계산
- [ ]  처리 이력 타임라인 기록
- [ ]  상태별 색상 구분

---

## 12. 관련 화면

- 재고 관리: AS 입고 시 시리얼 상태 변경
- 입고 관리: AS 입고 처리 연동
- 출고 관리: AS 처리 후 재출고

---
