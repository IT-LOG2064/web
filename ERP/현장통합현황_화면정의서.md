# 현장 통합 현황

## 1. 화면 개요

### 1.1 기본 정보

- **화면명**: 현장 통합 현황
- **목적**: 현장별 계약 이행 현황, 자재 출고 현황, 프로젝트 이력, 정산 요약을 통합 조회

---

## 2. 초기 로드

### 2.1 초기 화면 상태

- 현장 선택 드롭다운: 기본값 첫 번째 현장 또는 비어있음
- 현장 선택 시 해당 현장의 전체 데이터 로드
- 기본 탭: 개요 탭 활성화

---

## 3. 현장 선택 영역

### 3.1 현장 선택 드롭다운

- 등록된 현장 목록 표시
- 형식: "현장명 (발주번호)" (예: 강남 오피스텔 (IT260115-01))
- 변경 시 전체 데이터 재조회

### 3.2 통합 검색

- 키워드 검색 입력 필드

### 3.3 [견적서 확인] 버튼

- 현장 우측 상단 배치
- 클릭 시 견적서 확인 모달 오픈

---

## 4. 탭 구성

5개의 탭으로 구성됨:

- **탭 1: 개요**
- **탭 2: 계약 이행 현황**
- **탭 3: 발주 자재 현황**
- **탭 4: 프로젝트 이력**
- **탭 5: 정산요약**

---

## 5. 탭 1: 개요

### 5.1 문제 요약 (조건부 표시)

- 문제 발생 시 상단에 노란 경고 박스 표시
- 내용: 문제 건수, 상세 내용 (예: "초과 출고 1건 (통신전용 방수함체 +2)")
- 링크: "발주 자재 현황에서 보기" → 발주 자재 현황 탭으로 이동

### 5.2 KPI 카드 (4개)

| KPI | 색상 | 설명 |
| --- | --- | --- |
| 계약이행률 | 파란색 | 발주 대비 출고 이행률 (%) |
| 출고 | 초록색 | 총 출고 수량 |
| 미출고 | 노란색 | 아직 미출고된 수량 |
| 초과 | 노란색/빨간색 | 발주 수량 초과 출고량 |

- 초과 수량 존재 시: 빨간 "주의" 뱃지 표시, 테두리 강조

---

## 6. 탭 2: 계약 이행 현황

### 6.1 표시 정보

- 계약(견적) 기준 이행 현황
- 자재별 계약 수량 대비 출고 현황

### 6.2 테이블 컬럼

| 컬럼 | 내용 |
| --- | --- |
| 자재코드 |  |
| 자재명 |  |
| 단위 |  |
| 계약수량 |  |
| 출고수량 |  |
| 이행률 |  |
| 상태 |  |

---

## 7. 탭 3: 발주 자재 현황

### 7.1 필터 버튼

- [전체] / [초과만] / [문제만] / [엑셀] 버튼 제공

### 7.2 테이블 컬럼

| 컬럼명 | 표시 내용 | 비고 |
| --- | --- | --- |
| 코드 | M-AC-001 |  |
| 자재명 | 열화상 카메라 |  |
| 단위 | ea |  |
| 발주 | 10 | 발주 수량 |
| 출고 | 10 | 총 출고 수량 |
| 미출고 | 0 | 발주 - 출고 |
| 초과 | +2 | 초과 시 빨간색 굵게 표시 |
| 운용 | 9 | 현재 현장 운용 중 |
| 회수 | 1 | 회수된 수량 |
| 분실 | 0 | 분실 처리된 수량 |
| 출고상태 | 뱃지 (완료/초과/미완료) | 색상 구분 |
| 준비율 | 100% |  |

### 7.3 출고상태 뱃지

| 상태 | 색상 | 조건 |
| --- | --- | --- |
| 완료 | 회색 | 발주 수량 == 출고 수량 |
| 초과 | 주황색 | 출고 > 발주 |
| 미완료 | 주황색 | 출고 < 발주 |

---

## 8. 탭 4: 프로젝트 이력

### 8.1 필터 버튼

- [전체] / [발주변경] / [출고] / [회수] / [파손/분실]

### 8.2 표시 정보

- 해당 현장의 모든 이벤트 이력
- 최신순 정렬
- 일시, 이벤트 유형, 내용, 담당자

---

## 9. 탭 5: 정산요약

### 9.1 표시 정보

- 현장 전체 정산 요약
- 자재별 비용 내역
- 합계 정보

### 9.2 테이블

- 자재명, 단위, 수량, 단가, 금액 등

---

## 10. 견적서 확인 모달

### 10.1 오픈 조건

- [견적서 확인] 버튼 클릭

### 10.2 표시 정보

- 해당 현장의 견적서 파일 미리보기 (이미지/PDF)

### 10.3 버튼

- [닫기]: 모달 닫기
- 배경 클릭으로도 닫기 가능

---

## 11. 비즈니스 규칙

### 11.1 계약이행률 계산

```
계약이행률 = (출고 완료 수량 / 발주 수량) × 100
```

### 11.2 초과 출고 감지

- 특정 자재의 출고 수량이 발주 수량을 초과할 경우 자동 감지
- 개요 탭 문제 요약에 즉시 반영

### 11.3 미출고 계산

```
미출고 = 발주 수량 - 출고 수량 (최소 0)
```

### 11.4 준비율 계산

```
준비율 = (출고 수량 / 발주 수량) × 100
초과 시 100% 초과 표시 (예: 166%)
```

---

## 12. 에러 처리

| 상황 | 메시지 |
| --- | --- |
| 현장 미선택 | 데이터 표시 없음 (현장을 선택하세요) |
| 데이터 없음 | 해당 현장의 데이터가 없습니다 |

---

## 13. 개발 체크리스트

### 13.1 필수 구현 사항

- [ ]  현장 선택 및 데이터 로드
- [ ]  개요 탭 - KPI 카드 표시
- [ ]  개요 탭 - 문제 요약 (초과/미완료)
- [ ]  계약 이행 현황 탭
- [ ]  발주 자재 현황 탭 (필터 버튼 포함)
- [ ]  프로젝트 이력 탭 (필터 버튼 포함)
- [ ]  정산요약 탭
- [ ]  견적서 확인 모달

### 13.2 비즈니스 로직

- [ ]  계약이행률 자동 계산
- [ ]  초과 출고 자동 감지 및 경고
- [ ]  엑셀 다운로드 (발주 자재 현황)

---

## 14. 관련 화면

- 견적 관리: 견적서 정보 참조
- 발주 관리: 발주 자재 정보 참조
- 출고 관리: 출고 이력 연동
- 입고 관리: 회수 이력 연동

---
